<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="(J#|YiY]J299U]z-A:o+">transmitPower</variable><variable id="JXEQxjh],dvlC~Wx$k#F">currentRadioGroup</variable><variable id="khR~J^}6,%p0@8.;-Znz">results</variable><variable id="c(;t+X0Fm/e-xk:rPg1*">strengths</variable><variable id=").9Yndu?RI_mQEU8[9Bh">i</variable><variable id="dYKA7X9zBt?)q6@Mq?bx">j</variable><variable id="]8Z`B{Nn_cTXF68DN={q">count</variable></variables><comment id="i3Un$0vCI5W,a{=)Z8P2" x="1440.40625" y="2201" w="480" h="120">
Two cases : bound for position or client who searching position
</comment><block type="pxt-on-start" id="-%*g?xHa]8+{NievmJG|" x="20" y="20"><statement name="HANDLER"><block type="typescript_statement" id="@d|833mymMe1.}VU0]3("><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let results: boolean[] = []" numlines="1" declaredvars="results"></mutation><next><block type="typescript_statement" id="LFDboAH_/WUL%y+p;6KC"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let currentRadioGroup = 0" numlines="1" declaredvars="currentRadioGroup"></mutation><next><block type="variables_set" id="#DoT:4;RDK-}!9qzVUvi"><field name="VAR" id="]8Z`B{Nn_cTXF68DN={q">count</field><value name="VALUE"><shadow type="math_number" id="}vIcprXvd8wu#nhQKcb)"><field name="NUM">0</field></shadow></value><next><block type="typescript_statement" id="SVB,qm$+r*)1nl%vt@;Q"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="class Configuration {" line1="    constructor(private isBoundary: boolean = true) {" line2="        new KindConfig((isBoundary: boolean) =&gt; this.finishConfig(isBoundary));" line3="    }" line4="    finishConfig(isBoundary: boolean) {" line5="        this.isBoundary = isBoundary;" line6="        if (this.isBoundary) {" line7="            new ChooseTagGroup(ConfigureTag);" line8="        } else {" line9="            ConfigureClient();" line10="        }" line11="    }" line12="}" numlines="13"></mutation><next><block type="typescript_statement" id="le4BQa7GXUjh;GgN.K4H"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="class KindConfig {" line1="    constructor(next: (isBoudary: boolean) =&gt; void, private isBoundary: boolean = true) {" line2="        input.onButtonPressed(Button.A, () =&gt; this.changeKind());" line3="        input.onButtonPressed(Button.B, () =&gt; next(this.isBoundary));" line4="        this.show();" line5="    }" line6="    changeKind() {" line7="        this.isBoundary = !this.isBoundary;" line8="        this.show();" line9="    }" line10="    show() {" line11="        if (this.isBoundary) {" line12="            basic.showIcon(IconNames.Square)" line13="        } else {" line14="            basic.clearScreen()" line15="            led.plot(2, 2)" line16="        }" line17="    }" line18="}" numlines="19"></mutation><next><block type="typescript_statement" id="pK1AiK%Q,,$ol^nFZE_%"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="class ChooseTagGroup {" line1="    constructor(next: (group: number) =&gt; void, private group: number = 0) {" line2="        input.onButtonPressed(Button.A, () =&gt; this.changeGroup());" line3="        input.onButtonPressed(Button.B, () =&gt; next(this.group));" line4="        this.show();" line5="    }" line6="    changeGroup() {" line7="        this.group = (this.group + 1) % 255;" line8="        this.show();" line9="    }" line10="    show() {" line11="        basic.showNumber(this.group);" line12="    }" line13="}" numlines="14"></mutation><next><block type="typescript_statement" id="2:BV)I~;O_]^iLW*b/@5"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="new Configuration()" numlines="1"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id=".:m,jBoE6Ovs^cHrlIGS" x="880" y="20"><mutation name="ConfigureTag" functionid="=k:6nU0*2wp4+jVsD+sg"><arg name="group" id="ajl7qvr81f5z5rz2vsqri" type="number"></arg></mutation><field name="function_name">ConfigureTag</field><data>0</data><value name="ajl7qvr81f5z5rz2vsqri"><block type="argument_reporter_number" id="VZ^$q#2m-6P*?-}ou8%:"><mutation duplicateondrag="true"></mutation><field name="VALUE">group</field></block></value><statement name="STACK"><block type="device_clear_display" id="8V7EJ$i9;V{mW4T6Qt2^"><next><block type="radio_set_group" id="Jm@rOkDTx}vWHtwtQ7y2"><value name="ID"><shadow type="math_number_minmax" id="oYzwCC5E4xoOd?(3zP`v"><mutation min="0" max="255" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="argument_reporter_number" id="@[J$C*P)IY/eplXOAq;w"><field name="VALUE">group</field></block></value><next><block type="radio_set_transmit_serial_number" id="D$eFO]?Xi@yy{{x@cch/"><value name="transmit"><shadow type="logic_boolean" id=",;[Lbx#)Y3f4hk{::JM{"><field name="BOOL">TRUE</field></shadow></value><next><block type="device_show_number" id="o,hJGA[fNq;?oJ@A9dx$"><value name="number"><block type="argument_reporter_number" id="e_#Cfgn@%RUX]EJ~Ri_-"><field name="VALUE">group</field></block></value><next><block type="variables_set" id="jZO/}*!NzUVie[jKf0=}"><field name="VAR" id="(J#|YiY]J299U]z-A:o+">transmitPower</field><value name="VALUE"><shadow type="math_number" id="Ty:7cXBNS(Yx2ynF8tzL"><field name="NUM">6</field></shadow></value><next><block type="typescript_statement" id="Pd[V@J$.iBw-i]`3Ci:^"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="input.onButtonPressed(Button.A, () =&gt; {" line1="        transmitPower = (transmitPower + 1) % 8" line2="        radio.setTransmitPower(transmitPower)" line3="        basic.showNumber(transmitPower)" line4="    })" numlines="5"></mutation><next><block type="typescript_statement" id="@]V]mNft@pyr#@WS6vv@"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="input.onLogoEvent(TouchButtonEvent.Pressed, () =&gt; basic.showNumber(group))" numlines="1"></mutation><next><block type="typescript_statement" id="jjL5aT}EG)qwi]/D37YJ"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="basic.forever(()=&gt; {" line1="       radio.sendString(&quot;TAG&quot;)" line2="       basic.pause(1000);" line3="   })" numlines="4"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="~/{v_AylROF-H=(jT-@w" x="1608" y="20"><mutation name="changeGroup" functionid="?o=V},;0wY%[o1~C!THt"><arg name="shift" id="8rg4d9bkjlfs82s2zvle" type="number"></arg></mutation><field name="function_name">changeGroup</field><comment pinned="false" h="80" w="160">Could try with frequency also</comment><value name="8rg4d9bkjlfs82s2zvle"><block type="argument_reporter_number" id="P?c[v9Hml~@F^.y_ls!w"><mutation duplicateondrag="true"></mutation><field name="VALUE">shift</field></block></value><statement name="STACK"><block type="variables_set" id="TFr@M=7oim#[N5u^y=D?"><field name="VAR" id="JXEQxjh],dvlC~Wx$k#F">currentRadioGroup</field><value name="VALUE"><shadow type="math_number" id="*XheNaG4b-q*7Fu[/JuW"><field name="NUM">0</field></shadow><block type="math_modulo" id="Smu0J2e0zus-(Itj$wEB"><value name="DIVIDEND"><shadow type="math_number" id="QuzveL43jKK1:[(=W2))"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="n4H5+C.tTq_JT.YqM|!^"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="IxH@oa.@uH59[]ZvYDCq"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="9OJSUFD+k^B)SIWARD)!"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="nNKP:pd8^%Up+w*XIKR*"><field name="NUM">0</field></shadow><block type="variables_get" id="@hrZLa;MZWKU$vT~oJqa"><field name="VAR" id="JXEQxjh],dvlC~Wx$k#F">currentRadioGroup</field></block></value><value name="B"><shadow type="math_number" id="6.PaqxhOCluM`Z!#jF.o"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="@bXBXHCz]vqIIWLKt1CW"><field name="VALUE">shift</field></block></value></block></value><value name="B"><shadow type="math_number" id="gYjT=BvoKtN8z/iOYVV,"><field name="NUM">255</field></shadow></value></block></value><value name="DIVISOR"><shadow type="math_number" id=",Nk0e4.Xlc+%y]+D@r_#"><field name="NUM">255</field></shadow></value></block></value><next><block type="device_show_number" id="%rw*LS$WT,Mf:9!J9v(P"><value name="number"><block type="variables_get" id="ErLa7))cei%9%qGLOTbj"><field name="VAR" id="JXEQxjh],dvlC~Wx$k#F">currentRadioGroup</field></block></value><next><block type="radio_set_group" id="X9[-r6xb[9@7rGA[`g6+"><value name="ID"><shadow type="math_number_minmax" id="Bi33pCXr-vrmvMKNQcbS"><mutation min="0" max="255" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="IK?`Grz;o.XWgrMmkp:d"><field name="VAR" id="JXEQxjh],dvlC~Wx$k#F">currentRadioGroup</field></block></value><next><block type="controls_if" id="T%=x|kYOTi+P*u.VsN(D"><value name="IF0"><shadow type="logic_boolean" id="*K)B,p~zKWD{DPyN+ak4"><field name="BOOL">TRUE</field></shadow><block type="function_call_output" id="|_bRiE#-:`^#6m)+]P3A"><mutation name="alreadyFound" functionid=";7sB?UjaDnV-n#TroVb_"></mutation></block></value><statement name="DO0"><block type="basic_show_icon" id="00,iqXiPYpX$rgd4f[^{"><field name="i">IconNames.Yes</field></block></statement></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="bUdJy4YEhlJBEaqmKUtK" x="2619" y="20"><mutation name="alreadyFound" functionid=";7sB?UjaDnV-n#TroVb_"></mutation><field name="function_name">alreadyFound</field><statement name="STACK"><block type="function_return" id="?:qKe?R+(2.w:$-V][Tr"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="DUeMZ}=45zV-g6;..wS$"><field name="NUM">0</field></shadow><block type="logic_operation" id="ops[Ded2?-iNx3|P]/ey"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="RW(mwOR%sp!79ks;?#!P"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="rXb2)Yc|aP2b%rL0xao4"><field name="OP">NEQ</field><value name="A"><shadow type="math_number" id="^`YNx=m{|hbbvZ3fFVS/"><field name="NUM">0</field></shadow><block type="lists_index_get" id="/Wi(xI@KoU{wak6,yN,9"><value name="LIST"><block type="variables_get" id="^si}UwK:ENniROh[jVkE"><field name="VAR" id="khR~J^}6,%p0@8.;-Znz">results</field></block></value><value name="INDEX"><shadow type="math_number" id="T)4X5)A}uJLs|t[Y+m%,"><field name="NUM">0</field></shadow><block type="variables_get" id="wRFsj=Cv%`+k2T9cv1z*"><field name="VAR" id="JXEQxjh],dvlC~Wx$k#F">currentRadioGroup</field></block></value></block></value><value name="B"><shadow type="math_number" id="h{`;XF@e?B2Fax~.4DfL"><field name="NUM">0</field></shadow><block type="typescript_expression" id="L)|U-=E=(g]:vE4(?#{d"><field name="EXPRESSION">null</field></block></value></block></value><value name="B"><shadow type="logic_boolean" id="2@il%R6uIr/xC*kvQmau"><field name="BOOL">TRUE</field></shadow><block type="lists_index_get" id="GR~4Yy*-`bO;x50X{JO_"><value name="LIST"><block type="variables_get" id="M=2oPWk{2a^tbySo(qD$"><field name="VAR" id="khR~J^}6,%p0@8.;-Znz">results</field></block></value><value name="INDEX"><shadow type="math_number" id="}wh8w;w2;483(Wbi+w5m"><field name="NUM">0</field></shadow><block type="variables_get" id="/N[uD/CI:BWfSnU}XGn$"><field name="VAR" id="JXEQxjh],dvlC~Wx$k#F">currentRadioGroup</field></block></value></block></value></block></value></block></statement></block><block type="function_definition" id="IL!!8}S%#wErc]D)i!rW" x="20" y="2201"><mutation name="ConfigureClient" functionid="-+^AYtSzNrt^;/UG^gMh"></mutation><field name="function_name">ConfigureClient</field><statement name="STACK"><block type="radio_set_group" id="`/.Ccg+%6.V_!YaZksiy"><value name="ID"><shadow type="math_number_minmax" id="1;c*@I$e=fw0/wayk8t}"><mutation min="0" max="255" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="mg+~_O=0=,eNIxvg@SC2"><field name="VAR" id="JXEQxjh],dvlC~Wx$k#F">currentRadioGroup</field></block></value><next><block type="device_clear_display" id=",4h)jN6s#!le5qw/0ZX}"><next><block type="variables_set" id="oF/UQ~9ELf3}]i6--uWv"><field name="VAR" id="c(;t+X0Fm/e-xk:rPg1*">strengths</field><value name="VALUE"><shadow type="math_number" id="6%vgT[[8{*;#Q(S]}6H@"><field name="NUM">0</field></shadow><block type="lists_create_with" id=",1XRe9p$wqrdIXdL/BEG"><mutation items="3" horizontalafter="3"></mutation><value name="ADD0"><shadow type="math_number" id="/$i*unt{?ER;BWwwPDo`"><field name="NUM">0</field></shadow></value><value name="ADD1"><shadow type="math_number" id="0QW!P[h*56eWDv!-zkV,"><field name="NUM">0</field></shadow></value><value name="ADD2"><shadow type="math_number" id="8HcOKxZi9m@GqzQZS?~y"><field name="NUM">0</field></shadow></value></block></value><next><block type="typescript_statement" id="*%P*TUjwh?qQ/Jg+lB/]"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="input.onButtonPressed(Button.A, () =&gt; {" line1="        changeGroup(-1)" line2="    });" numlines="3"></mutation><next><block type="typescript_statement" id="2#B#/Z}:+%@}36B2Zlb/"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="input.onButtonPressed(Button.B, () =&gt; {" line1="        changeGroup(1)" line2="    });" numlines="3"></mutation><next><block type="typescript_statement" id="NKrfeeV|=B6tAK8%]Mg~"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="input.onLogoEvent(TouchButtonEvent.Pressed,()=&gt; {" line1="        if(alreadyFound()){" line2="            return;" line3="        }" line4="        if(radio.receivedPacket(2) + 128 &gt; 90){" line5="            // OK" line6="            results[currentRadioGroup] = true;" line7="            basic.showIcon(IconNames.Yes)" line8="        }" line9="    })" numlines="10"></mutation><next><block type="typescript_statement" id="@F`//(j:C],5D?|3XnuC"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="radio.onReceivedString(msg =&gt; {" line1="        if (alreadyFound()){" line2="            return;" line3="        }" line4="        if (msg.indexOf(&quot;TAG&quot;) !== 0) {" line5="            basic.showIcon(IconNames.Target)" line6="            return;" line7="        }" line8="        const signal = radio.receivedPacket(2) + 128;" line9="        showLine(Math.floor(signal / 20))" line10="    })" numlines="11"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id=",-=:-qu?KFwlyk0Avb;:" x="627" y="2201"><mutation name="showLine" functionid="`eQJaH70/.QEznz(zlM("><arg name="line" id="0vdynvf4u5mhhzvgkr9" type="number"></arg></mutation><field name="function_name">showLine</field><value name="0vdynvf4u5mhhzvgkr9"><block type="argument_reporter_number" id="hGiaK~t;6L811@8LU%f}"><mutation duplicateondrag="true"></mutation><field name="VALUE">line</field></block></value><statement name="STACK"><block type="device_clear_display" id="TTot(tCs8che`o]TXk`Z"><next><block type="pxt_controls_for" id="aE/.h^jm.iq1!zOq8tsU"><value name="VAR"><block type="variables_get_reporter" id="h(Hu~.rxtY*5b3_8I*Z("><mutation duplicateondrag="true"></mutation><field name="VAR" id=").9Yndu?RI_mQEU8[9Bh">i</field></block></value><value name="TO"><shadow type="math_whole_number" id="ovL[kPv(bzg}xvH6uSdN"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="LLshLf{N1A9tE)O2bI{0"><field name="VALUE">line</field></block></value><statement name="DO"><block type="pxt_controls_for" id="=!%JYLdYh*0BUTt5B!s."><value name="VAR"><block type="variables_get_reporter" id="7z/5@^{ocXMclQ{JlW$6"><mutation duplicateondrag="true"></mutation><field name="VAR" id="dYKA7X9zBt?)q6@Mq?bx">j</field></block></value><value name="TO"><shadow type="math_whole_number" id="MP,K(bgYo{L6aG{`[dy,"><field name="NUM">4</field></shadow></value><statement name="DO"><block type="device_plot" id="MmADmv2i@lNBly}wrS@t"><value name="x"><shadow type="math_number_minmax" id="Zy+=Dv9PyIGDz;obb!(4"><mutation min="0" max="4" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="u?zpf[+])=]qt/C0cP(B"><field name="VAR" id=").9Yndu?RI_mQEU8[9Bh">i</field></block></value><value name="y"><shadow type="math_number_minmax" id="0s;tJGX2.7qRmi)yjeEY"><mutation min="0" max="4" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id=",Vq)95U]:z{ih*mHabJ~"><field name="VAR" id="dYKA7X9zBt?)q6@Mq?bx">j</field></block></value></block></statement></block></statement></block></next></block></statement></block><block type="function_definition" id="tyGN3~d0H-F*Iv|;a8+]" x="1055" y="2201"><mutation name="showReception" functionid="h/OV!56hq,tt@e3jA;K)"><arg name="value" id="odxnyd4teejx0yd3z7evx" type="number"></arg></mutation><field name="function_name">showReception</field><value name="odxnyd4teejx0yd3z7evx"><block type="argument_reporter_number" id="Ey-Ff``e+}^%C_Rc2=%s"><mutation duplicateondrag="true"></mutation><field name="VALUE">value</field></block></value><statement name="STACK"><block type="device_clear_display" id="ai[h2-bcrY.e.g*5FQic"><next><block type="device_plot" id="9`MTfH]~C7?K~Dcv[uMW"><value name="x"><shadow type="math_number_minmax" id="%YFYTPyy)]6oT3MV0].9"><mutation min="0" max="4" precision="0"></mutation><field name="SLIDER">0</field></shadow></value><value name="y"><shadow type="math_number_minmax" id="-,CUVPAbpJR,[.!nRcl9"><mutation min="0" max="4" precision="0"></mutation><field name="SLIDER">0</field></shadow></value><next><block type="controls_if" id="no$Y;iaPg2nXeHJ,gs0Z"><value name="IF0"><shadow type="logic_boolean" id="v$^9l-5/4vZW48.`{^qf"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id=":aV?B*(tn|m2+JB#S-mY"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="6FOTEW}Bgs0HACfkpMuO"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="DxWvi[D),jD_Ao]sI])x"><field name="VALUE">value</field></block></value><value name="B"><shadow type="math_number" id=",{OF5_^s2df$@5e0ITU@"><field name="NUM">1</field></shadow></value></block></value><statement name="DO0"><block type="device_plot" id="Kr[n5C_?K_cvN}6OoM5`"><value name="x"><shadow type="math_number_minmax" id="1R0SI|a#H2Ldolw[fOeh"><mutation min="0" max="4" precision="0"></mutation><field name="SLIDER">1</field></shadow></value><value name="y"><shadow type="math_number_minmax" id="~d0^z5.H4%wrv#qP(K{D"><mutation min="0" max="4" precision="0"></mutation><field name="SLIDER">0</field></shadow></value></block></statement><next><block type="controls_if" id="~/]g*=|(J@HF:Ey3V7)M"><value name="IF0"><shadow type="logic_boolean" id="M_)LZ;gpUB~]:8#R6=yp"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="!@#r`=f#Lfg%}Ip.~i*e"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="WG2vz7$](|3m^8i+w;M?"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="O$lsq-OlrD$ba*d5w=tW"><field name="VALUE">value</field></block></value><value name="B"><shadow type="math_number" id=")!xWFHpSi~D/43hV;0}a"><field name="NUM">2</field></shadow></value></block></value><statement name="DO0"><block type="device_plot" id="D].[VpWetDGGmpJUR%=f"><value name="x"><shadow type="math_number_minmax" id="JCa{3AoWG$ggdnmg*_-T"><mutation min="0" max="4" precision="0"></mutation><field name="SLIDER">2</field></shadow></value><value name="y"><shadow type="math_number_minmax" id="lc]UOSp)E|Cs=]b!u}ep"><mutation min="0" max="4" precision="0"></mutation><field name="SLIDER">0</field></shadow></value></block></statement></block></next></block></next></block></next></block></statement></block></xml>